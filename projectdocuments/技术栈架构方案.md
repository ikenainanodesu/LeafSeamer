# LeafSeamer æŠ€æœ¯æ ˆæ¶æ„æ–¹æ¡ˆ

> åˆ›å»ºæ—¶é—´: 2025-12-04  
> æœ€åæ›´æ–°: 2025-12-04  
> ç‰ˆæœ¬: v1.0

---

## ğŸ“‹ æ¦‚è¿°

LeafSeamer æ˜¯ä¸€ä¸ªé¢å‘ç›´æ’­å¹¿æ’­æ§åˆ¶ä¸åŒ…è£…çš„ç»¼åˆæ€§ç³»ç»Ÿï¼Œé‡‡ç”¨äº‘ç«¯-æœ¬åœ°æ··åˆæ¶æ„ï¼Œå®ç°ç›´æ’­åœºæ™¯ä¸‹çš„è°ƒéŸ³å°æ§åˆ¶ã€OBS ç®¡ç†ã€å›¾æ–‡åŒ…è£…å±•ç¤ºç­‰åŠŸèƒ½ã€‚

### ç³»ç»Ÿç‰¹ç‚¹

- **æ¨¡å—åŒ–è®¾è®¡**: å„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ã€æ¾è€¦åˆ
- **é«˜æ‰©å±•æ€§**: å•ç‹¬å¯è°ƒç”¨çš„å€¼ä¸æ–¹æ³•ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **å¼‚æ­¥å¤„ç†**: æœ¬åœ°éƒ¨åˆ†é‡‡ç”¨å¼‚æ­¥æœºåˆ¶ï¼Œå¸¦æ—¶é—´æˆ³
- **æ•°æ®åŒå‘åŒæ­¥**: äº‘ç«¯å†·æ•°æ®å­˜å‚¨ + æœ¬åœ°çƒ­æ•°æ®å¤„ç†

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### æ¶æ„å±‚çº§

```mermaid
graph TB
    subgraph Cloud["â˜ï¸ äº‘ç«¯å±‚ (Google Cloud)"]
        GS[Google Sheets<br/>å†·æ•°æ®å­˜å‚¨]
        GAS[Google Apps Script<br/>è¡¨æ ¼é€»è¾‘å¤„ç†]
    end

    subgraph Local["ğŸ’» æœ¬åœ°å±‚ (NodeCG)"]
        NC[NodeCG æ ¸å¿ƒ]

        subgraph Bundles["Bundle æ¨¡å—"]
            MC[Mixer Control<br/>è°ƒéŸ³å°æ§åˆ¶]
            OC[OBS Control<br/>OBSæ§åˆ¶]
            GP[Graphics Package<br/>å›¾æ–‡åŒ…è£…]
            SM[Schedule Manager<br/>æ’­æ§åˆ—è¡¨]
        end

        subgraph Core["æ ¸å¿ƒæœåŠ¡"]
            LOG[æ—¥å¿—ç³»ç»Ÿ]
            BKP[å¤‡ä»½/æ¢å¤ç³»ç»Ÿ]
            SYNC[æ•°æ®åŒæ­¥æœåŠ¡]
        end
    end

    subgraph External["ğŸ”Œ å¤–éƒ¨è®¾å¤‡"]
        MIXER[Yamaha DM3<br/>è°ƒéŸ³å°]
        OBS[OBS Studio<br/>v32.0]
    end

    GS -->|æ‹‰å–é…ç½®| SYNC
    SYNC -->|ä¸Šè¡ŒåŒæ­¥| GAS
    NC --> Bundles
    NC --> Core
    MC <-->|OSC| MIXER
    OC <-->|WebSocket| OBS
    SYNC --> MC
    SYNC --> GP
    LOG -.ç›‘å¬.-> Bundles
    BKP -.å¤‡ä»½.-> Bundles
    BKP -.å¤‡ä»½.-> Core
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆè¯¦è§£

### 1. äº‘ç«¯å±‚ (Cloud Layer)

#### Google Sheets + Google Apps Script

| ç»„ä»¶         | æŠ€æœ¯                 | ç”¨é€”                     |
| ------------ | -------------------- | ------------------------ |
| **è¡¨ 1**     | Google Sheets        | å†·æ•°æ®å­˜å‚¨ä¸ç¼–è¾‘         |
| **è¡¨ 2**     | Google Sheets        | å¿«é€Ÿç´¢å¼•æŸ¥è¯¢             |
| **GAS è„šæœ¬** | JavaScript (ES6+)    | è¡¨æ ¼é—´é€»è¾‘å¤„ç†ã€æ•°æ®éªŒè¯ |
| **API**      | Google Sheets API v4 | æœ¬åœ°ç³»ç»Ÿæ‹‰å–æ•°æ®         |

**æ•°æ®ç±»åˆ«**:

- è°ƒéŸ³å°é…ç½® (IPã€ç«¯å£ã€patchingã€mute groupã€DCA ç­‰)
- å›¾æ–‡åŒ…è£…æ•°æ® (æ¸¸æˆåã€ç©å®¶åã€æ—¶é—´ä¼°ç®—ç­‰)
- å¤šè¯­ç§æ”¯æŒ (ä¸­æ—¥è‹±å¯¹ç…§å­è¡¨æ ¼)

---

### 2. æœ¬åœ°å±‚ (Local Layer)

#### æ ¸å¿ƒæ¡†æ¶: NodeCG

| æŠ€æœ¯æ ˆ     | ç‰ˆæœ¬       | ç”¨é€”         |
| ---------- | ---------- | ------------ |
| NodeCG     | æœ€æ–°ç¨³å®šç‰ˆ | å¹¿æ’­å›¾å½¢æ¡†æ¶ |
| Node.js    | 18.x LTS   | åç«¯è¿è¡Œæ—¶   |
| TypeScript | 5.x        | å¼€å‘è¯­è¨€     |
| React      | 18.x       | å‰ç«¯æ¡†æ¶     |
| Vite       | 5.x        | å‰ç«¯æ‰“åŒ…å·¥å…· |

#### æ¶æ„æ¨¡å¼: Bundle æ¨¡å—åŒ–

æ¯ä¸ª Bundle ç‹¬ç«‹åŒ…å«:

- **Graphics**: è§†è§‰è¾“å‡ºé¡µé¢ (React ç»„ä»¶)
- **Dashboard**: æ“ä½œæ§åˆ¶é¢æ¿ (React ç»„ä»¶)
- **Extension**: åç«¯ä¸šåŠ¡é€»è¾‘ (Node.js + TypeScript)

---

### 3. é€šä¿¡åè®®

| åè®®ç±»å‹              | ç”¨é€”           | æŠ€æœ¯å®ç°                |
| --------------------- | -------------- | ----------------------- |
| **OSC**               | è°ƒéŸ³å°æ§åˆ¶     | `node-osc` åº“           |
| **WebSocket**         | OBS æ§åˆ¶       | `obs-websocket-js` v5.x |
| **Google Sheets API** | äº‘ç«¯æ•°æ®æ‹‰å–   | `googleapis` å®˜æ–¹åº“     |
| **NodeCG Replicants** | æ¨¡å—é—´æ•°æ®åŒæ­¥ | NodeCG å†…ç½®æœºåˆ¶         |
| **NodeCG Messages**   | æ¨¡å—é—´äº‹ä»¶é€šä¿¡ | NodeCG å†…ç½®æœºåˆ¶         |

---

## ğŸ“¦ æ¨¡å—è¯¦ç»†è®¾è®¡

### Module 1: Mixer Control (è°ƒéŸ³å°æ§åˆ¶)

**åŠŸèƒ½èŒè´£**:

- è°ƒéŸ³å°è¿æ¥çŠ¶æ€ç®¡ç†
- å®æ—¶è·å–æ··éŸ³çŠ¶æ€ (faderã€channel on/off)
- å¹½çµé€šé“æ£€æµ‹ (fader = -inf ä½†æœªå…³é—­)
- é…ç½®ä¸Šè¡ŒåŒæ­¥åˆ° Google Sheets

**æŠ€æœ¯å®ç°**:

```typescript
// Extension ç»“æ„
Bundle: mixer-control/
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ index.ts              // å…¥å£
â”‚   â”œâ”€â”€ connection.ts         // OSC è¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ state-manager.ts      // çŠ¶æ€ç®¡ç†å™¨
â”‚   â”œâ”€â”€ sync-service.ts       // äº‘ç«¯åŒæ­¥æœåŠ¡
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ mixer.types.ts    // ç±»å‹å®šä¹‰
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ mixer-dashboard.tsx   // React æ§åˆ¶é¢æ¿
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ConnectionStatus.tsx
â”‚       â”œâ”€â”€ ChannelList.tsx
â”‚       â””â”€â”€ FaderControl.tsx
â””â”€â”€ package.json
```

**æ ¸å¿ƒæ•°æ®ç»“æ„** (Replicant):

```typescript
interface MixerState {
  timestamp: number; // æ—¶é—´æˆ³
  connected: boolean;
  connectionInfo: {
    ip: string;
    port: number;
    subnetMask: string;
  };
  mixStatus: {
    channelCount: number;
    mixCount: number;
    fxCount: number;
    matrixCount: number;
  };
  channels: Channel[]; // å¯ç‹¬ç«‹è®¿é—®
  dcaGroups: DCAGroup[]; // å¯ç‹¬ç«‹è®¿é—®
  muteGroups: MuteGroup[]; // å¯ç‹¬ç«‹è®¿é—®
}
```

**å¼‚æ­¥å¤„ç†ç­–ç•¥**:

- ä½¿ç”¨ `async/await` å¤„ç† OSC é€šä¿¡
- æ¯æ¬¡çŠ¶æ€å˜æ›´å¸¦æ—¶é—´æˆ³
- äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œé¿å…è½®è¯¢

---

### Module 2: OBS Control (OBS æ§åˆ¶)

**åŠŸèƒ½èŒè´£**:

- OBS è¿æ¥ç®¡ç†
- Scene Collection / Profile åˆ‡æ¢
- è§†é¢‘æ’­æ”¾é˜Ÿåˆ—ç®¡ç†
- æ¨æµç›‘æ§ (ç ç‡ã€ä¸¢åŒ…ç‡ã€éŸ³é‡ç”µå¹³)

**æŠ€æœ¯å®ç°**:

```typescript
Bundle: obs-control/
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ connection.ts         // WebSocket è¿æ¥
â”‚   â”œâ”€â”€ scene-manager.ts      // åœºæ™¯ç®¡ç†
â”‚   â”œâ”€â”€ video-queue.ts        // è§†é¢‘é˜Ÿåˆ—
â”‚   â””â”€â”€ stream-monitor.ts     // æ¨æµç›‘æ§
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ obs-dashboard.tsx
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ SceneSelector.tsx
â”‚       â”œâ”€â”€ VideoQueue.tsx
â”‚       â””â”€â”€ StreamStats.tsx
â””â”€â”€ graphics/
    â””â”€â”€ stream-monitor.html   // ç›‘æ§æ˜¾ç¤ºå›¾å½¢
```

**æ ¸å¿ƒæ•°æ®ç»“æ„**:

```typescript
interface OBSState {
  timestamp: number;
  connected: boolean;
  currentScene: string;
  currentProfile: string;
  videoQueue: VideoItem[]; // å¯ç‹¬ç«‹è®¿é—®
  streamStats: {
    // å¯ç‹¬ç«‹è®¿é—®
    bitrate: number;
    droppedFrames: number;
    audioLevel: number[];
  };
}
```

---

### Module 3: Graphics Package (å›¾æ–‡åŒ…è£…)

**åŠŸèƒ½èŒè´£**:

- ä» Google Sheets æ‹‰å–å±•ç¤ºæ•°æ®
- å®æ—¶æ˜¾ç¤ºæ¸¸æˆåã€ç©å®¶åã€æœºç§ç­‰ä¿¡æ¯
- å¤šè¯­ç§åˆ‡æ¢æ”¯æŒ

**æŠ€æœ¯å®ç°**:

```typescript
Bundle: graphics-package/
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ data-fetcher.ts       // ä»äº‘ç«¯æ‹‰å–æ•°æ®
â”œâ”€â”€ graphics/
â”‚   â”œâ”€â”€ lower-third.html      // ä¸‹ä¸‰åˆ†ä¹‹ä¸€
â”‚   â”œâ”€â”€ scoreboard.html       // è®¡åˆ†æ¿
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ GameInfo.tsx
â”‚       â””â”€â”€ PlayerInfo.tsx
â””â”€â”€ dashboard/
    â””â”€â”€ graphics-control.tsx  // æ–‡å­—ç¼–è¾‘æ§åˆ¶
```

**æ•°æ®æµ**:

```mermaid
sequenceDiagram
    participant GS as Google Sheets
    participant EXT as Extension
    participant REP as Replicant
    participant GFX as Graphics

    EXT->>GS: æ‹‰å–æ•°æ®
    GS-->>EXT: è¿”å›JSON
    EXT->>REP: æ›´æ–° Replicant (å¸¦æ—¶é—´æˆ³)
    REP-->>GFX: è‡ªåŠ¨åŒæ­¥
    GFX->>GFX: æ¸²æŸ“æ˜¾ç¤º
```

---

### Module 4: Schedule Manager (æ’­æ§åˆ—è¡¨ç®¡ç†)

**åŠŸèƒ½èŒè´£**:

- æ—¥ç¨‹è¡¨ç®¡ç†
- å½“å‰/ä¸‹ä¸€ä¸ªèŠ‚ç›®æç¤º
- æ—¶é—´ä¼°ç®—ä¸å€’è®¡æ—¶

**æŠ€æœ¯å®ç°**:

```typescript
Bundle: schedule-manager/
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ schedule-loader.ts    // ä»äº‘ç«¯åŠ è½½æ—¥ç¨‹
â”‚   â””â”€â”€ timer.ts              // å€’è®¡æ—¶é€»è¾‘
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ schedule-panel.tsx
â””â”€â”€ graphics/
    â””â”€â”€ schedule-display.html
```

---

### Module 5: Logger System (æ—¥å¿—ç³»ç»Ÿ)

**åŠŸèƒ½èŒè´£**:

- å…¨å±€äº‹ä»¶æ—¥å¿—è®°å½•
- å®æ—¶æ—¥å¿—æŸ¥è¯¢
- åŸºäºæ—¶é—´/äº‹ä»¶çš„è§†å›¾æŸ¥è¯¢
- å®šæœŸæ¸…ç†è¿‡æœŸæ—¥å¿—

**æŠ€æœ¯å®ç°**:

```typescript
Bundle: logger-system/
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ logger.ts             // æ—¥å¿—æ ¸å¿ƒ
â”‚   â”œâ”€â”€ storage.ts            // æŒä¹…åŒ–å­˜å‚¨
â”‚   â”œâ”€â”€ cleaner.ts            // å®šæœŸæ¸…ç†
â”‚   â””â”€â”€ query.ts              // æŸ¥è¯¢æ¥å£
â””â”€â”€ dashboard/
    â””â”€â”€ log-viewer.tsx        // æ—¥å¿—æŸ¥çœ‹å™¨
```

**æ—¥å¿—æ•°æ®ç»“æ„**:

```typescript
interface LogEntry {
  id: string;
  timestamp: number; // æ—¶é—´æˆ³
  level: "info" | "warn" | "error";
  module: string; // æ¥æºæ¨¡å—
  event: string; // äº‹ä»¶ç±»å‹
  message: string;
  metadata?: Record<string, any>;
}
```

**å¼‚æ­¥å¤„ç†**:

- ä½¿ç”¨ `async` æ–‡ä»¶å†™å…¥é¿å…é˜»å¡
- æ—¥å¿—é˜Ÿåˆ—æœºåˆ¶ï¼Œæ‰¹é‡å†™å…¥
- Worker Threads è¿›è¡Œæ—¥å¿—æ¸…ç†

---

### Module 6: Backup & Recovery System (å¤‡ä»½/æ¢å¤ç³»ç»Ÿ)

**åŠŸèƒ½èŒè´£**:

- æ‰‹åŠ¨/è‡ªåŠ¨å®šæ—¶å¤‡ä»½
- é€‰æ‹©æ€§æ¢å¤
- è¿‡æœŸå¤‡ä»½æ¸…ç†

**æŠ€æœ¯å®ç°**:

```typescript
Bundle: backup-system/
â”œâ”€â”€ extension/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ backup-manager.ts     // å¤‡ä»½ç®¡ç†
â”‚   â”œâ”€â”€ recovery-manager.ts   // æ¢å¤ç®¡ç†
â”‚   â”œâ”€â”€ scheduler.ts          // å®šæ—¶ä»»åŠ¡
â”‚   â””â”€â”€ storage.ts            // å¤‡ä»½å­˜å‚¨
â””â”€â”€ dashboard/
    â””â”€â”€ backup-panel.tsx      // å¤‡ä»½æ§åˆ¶é¢æ¿
```

**å¤‡ä»½ç­–ç•¥**:

- å¤‡ä»½æ‰€æœ‰ Replicants æ•°æ®
- å¤‡ä»½é…ç½®æ–‡ä»¶
- å¢é‡å¤‡ä»½ + å®Œæ•´å¤‡ä»½ç»“åˆ

---

### Module 7: Data Sync Service (æ•°æ®åŒæ­¥æœåŠ¡)

**ç‹¬ç«‹æ ¸å¿ƒæœåŠ¡** (é Bundle)

**åŠŸèƒ½èŒè´£**:

- ä» Google Sheets æ‹‰å–é…ç½®
- æœ¬åœ°é…ç½®ä¸Šè¡ŒåŒæ­¥åˆ°äº‘ç«¯
- ç¼“å­˜ç®¡ç†

**æŠ€æœ¯å®ç°**:

```typescript
bundles/shared-services/
â””â”€â”€ data-sync/
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ google-sheets-client.ts
    â”œâ”€â”€ cache-manager.ts
    â””â”€â”€ sync-scheduler.ts
```

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
LeafSeamer/
â”œâ”€â”€ bundles/                          # NodeCG Bundles
â”‚   â”œâ”€â”€ mixer-control/                # è°ƒéŸ³å°æ§åˆ¶ Bundle
â”‚   â”‚   â”œâ”€â”€ extension/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ state-manager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sync-service.ts
â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚       â””â”€â”€ mixer.types.ts
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ mixer-dashboard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ ConnectionStatus.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ ChannelList.tsx
â”‚   â”‚   â”‚       â””â”€â”€ FaderControl.tsx
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ obs-control/                  # OBS æ§åˆ¶ Bundle
â”‚   â”‚   â”œâ”€â”€ extension/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ scene-manager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ video-queue.ts
â”‚   â”‚   â”‚   â””â”€â”€ stream-monitor.ts
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ obs-dashboard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ SceneSelector.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ VideoQueue.tsx
â”‚   â”‚   â”‚       â””â”€â”€ StreamStats.tsx
â”‚   â”‚   â”œâ”€â”€ graphics/
â”‚   â”‚   â”‚   â””â”€â”€ stream-monitor.html
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ graphics-package/             # å›¾æ–‡åŒ…è£… Bundle
â”‚   â”‚   â”œâ”€â”€ extension/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ data-fetcher.ts
â”‚   â”‚   â”œâ”€â”€ graphics/
â”‚   â”‚   â”‚   â”œâ”€â”€ lower-third.html
â”‚   â”‚   â”‚   â”œâ”€â”€ scoreboard.html
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ GameInfo.tsx
â”‚   â”‚   â”‚       â””â”€â”€ PlayerInfo.tsx
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ graphics-control.tsx
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ schedule-manager/             # æ’­æ§åˆ—è¡¨ç®¡ç† Bundle
â”‚   â”‚   â”œâ”€â”€ extension/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ schedule-loader.ts
â”‚   â”‚   â”‚   â””â”€â”€ timer.ts
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ schedule-panel.tsx
â”‚   â”‚   â”œâ”€â”€ graphics/
â”‚   â”‚   â”‚   â””â”€â”€ schedule-display.html
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ logger-system/                # æ—¥å¿—ç³»ç»Ÿ Bundle
â”‚   â”‚   â”œâ”€â”€ extension/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cleaner.ts
â”‚   â”‚   â”‚   â””â”€â”€ query.ts
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ log-viewer.tsx
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ backup-system/                # å¤‡ä»½/æ¢å¤ç³»ç»Ÿ Bundle
â”‚   â”‚   â”œâ”€â”€ extension/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ backup-manager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ recovery-manager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ scheduler.ts
â”‚   â”‚   â”‚   â””â”€â”€ storage.ts
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ backup-panel.tsx
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â””â”€â”€ shared-services/              # å…±äº«æœåŠ¡
â”‚       â””â”€â”€ data-sync/
â”‚           â”œâ”€â”€ index.ts
â”‚           â”œâ”€â”€ google-sheets-client.ts
â”‚           â”œâ”€â”€ cache-manager.ts
â”‚           â””â”€â”€ sync-scheduler.ts
â”‚
â”œâ”€â”€ shared/                           # è·¨ Bundle å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ types/                        # å…¨å±€ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ mixer.types.ts
â”‚   â”‚   â”œâ”€â”€ obs.types.ts
â”‚   â”‚   â”œâ”€â”€ graphics.types.ts
â”‚   â”‚   â””â”€â”€ common.types.ts
â”‚   â”œâ”€â”€ utils/                        # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â”œâ”€â”€ timestamp.ts
â”‚   â”‚   â””â”€â”€ validators.ts
â”‚   â””â”€â”€ constants/                    # å¸¸é‡å®šä¹‰
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ cfg/                              # NodeCG é…ç½®ç›®å½•
â”‚   â””â”€â”€ leafseamer.json               # ä¸»é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ db/                               # Replicants æŒä¹…åŒ–å­˜å‚¨
â”‚
â”œâ”€â”€ logs/                             # æ—¥å¿—æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ backups/                          # å¤‡ä»½æ–‡ä»¶ç›®å½•
â”‚
â”œâ”€â”€ assets/                           # é™æ€èµ„æº
â”‚   â”œâ”€â”€ videos/                       # è§†é¢‘é˜Ÿåˆ—æ–‡ä»¶
â”‚   â””â”€â”€ images/
â”‚
â”œâ”€â”€ projectdocuments/                 # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ needs.md                      # éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ prompt.md
â”‚   â”œâ”€â”€ æŠ€æœ¯æ ˆæ¶æ„æ–¹æ¡ˆ.md             # æœ¬æ–‡æ¡£
â”‚   â”œâ”€â”€ ç³»ç»Ÿæµç¨‹å›¾.md                 # æµç¨‹å›¾æ–‡æ¡£
â”‚   â””â”€â”€ APIæ–‡æ¡£.md                    # å¾…åˆ›å»º
â”‚
â”œâ”€â”€ package.json                      # æ ¹é¡¹ç›®ä¾èµ–
â”œâ”€â”€ tsconfig.json                     # TypeScript é…ç½®
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸ”„ ç³»ç»Ÿæµç¨‹å›¾

### æ•´ä½“æ•°æ®æµ

```mermaid
flowchart TD
    Start([ç³»ç»Ÿå¯åŠ¨]) --> InitNodeCG[åˆå§‹åŒ– NodeCG]
    InitNodeCG --> LoadBundles[åŠ è½½æ‰€æœ‰ Bundles]

    LoadBundles --> InitSync[å¯åŠ¨æ•°æ®åŒæ­¥æœåŠ¡]
    InitSync --> FetchCloud[ä» Google Sheets æ‹‰å–é…ç½®]
    FetchCloud --> CacheData[ç¼“å­˜åˆ°æœ¬åœ°]

    CacheData --> InitModules{åˆå§‹åŒ–å„æ¨¡å—}

    InitModules --> MixerInit[Mixer Control åˆå§‹åŒ–]
    InitModules --> OBSInit[OBS Control åˆå§‹åŒ–]
    InitModules --> GraphicsInit[Graphics Package åˆå§‹åŒ–]
    InitModules --> LoggerInit[Logger System å¯åŠ¨]
    InitModules --> BackupInit[Backup System å¯åŠ¨]

    MixerInit --> MixerConnect{è¿æ¥è°ƒéŸ³å°}
    MixerConnect -->|æˆåŠŸ| MixerListen[ç›‘å¬ OSC æ¶ˆæ¯]
    MixerConnect -->|å¤±è´¥| MixerRetry[å®šæ—¶é‡è¯•]
    MixerRetry --> MixerConnect

    MixerListen --> UpdateMixerState[æ›´æ–° Mixer Replicant<br/>å¸¦æ—¶é—´æˆ³]
    UpdateMixerState --> LogEvent1[è®°å½•æ—¥å¿—äº‹ä»¶]

    OBSInit --> OBSConnect{è¿æ¥ OBS}
    OBSConnect -->|æˆåŠŸ| OBSListen[ç›‘å¬ WebSocket äº‹ä»¶]
    OBSConnect -->|å¤±è´¥| OBSRetry[å®šæ—¶é‡è¯•]
    OBSRetry --> OBSConnect

    OBSListen --> UpdateOBSState[æ›´æ–° OBS Replicant<br/>å¸¦æ—¶é—´æˆ³]
    UpdateOBSState --> LogEvent2[è®°å½•æ—¥å¿—äº‹ä»¶]

    GraphicsInit --> WatchReplicants[ç›‘å¬ Replicants å˜åŒ–]
    WatchReplicants --> RenderGraphics[æ¸²æŸ“å›¾å½¢ç•Œé¢]

    LoggerInit --> ListenAllEvents[ç›‘å¬æ‰€æœ‰æ¨¡å—äº‹ä»¶]
    ListenAllEvents --> WriteLog[å¼‚æ­¥å†™å…¥æ—¥å¿—<br/>å¸¦æ—¶é—´æˆ³]
    WriteLog --> CheckExpired{æ£€æŸ¥è¿‡æœŸæ—¥å¿—}
    CheckExpired -->|æœ‰è¿‡æœŸ| CleanLogs[æ¸…ç†è¿‡æœŸæ—¥å¿—]
    CheckExpired -->|æ— è¿‡æœŸ| WaitNext[ç­‰å¾…ä¸‹æ¬¡æ£€æŸ¥]

    BackupInit --> CheckSchedule{æ£€æŸ¥å¤‡ä»½è®¡åˆ’}
    CheckSchedule -->|åˆ°è¾¾æ—¶é—´| CreateBackup[åˆ›å»ºå¤‡ä»½<br/>å¸¦æ—¶é—´æˆ³]
    CreateBackup --> CleanOldBackup[æ¸…ç†è¿‡æœŸå¤‡ä»½]
    CleanOldBackup --> WaitNextBackup[ç­‰å¾…ä¸‹æ¬¡å¤‡ä»½]

    UpdateMixerState --> Dashboard1[Dashboard æ˜¾ç¤º]
    UpdateOBSState --> Dashboard2[Dashboard æ˜¾ç¤º]

    Dashboard1 --> UserAction1{ç”¨æˆ·æ“ä½œ}
    UserAction1 -->|ä¿®æ”¹é…ç½®| SendOSC[å‘é€ OSC å‘½ä»¤]
    SendOSC --> MixerListen
    UserAction1 -->|ä¸Šè¡ŒåŒæ­¥| SyncToCloud[åŒæ­¥åˆ° Google Sheets]

    Dashboard2 --> UserAction2{ç”¨æˆ·æ“ä½œ}
    UserAction2 -->|åˆ‡æ¢åœºæ™¯| SendWS[å‘é€ WebSocket å‘½ä»¤]
    SendWS --> OBSListen

    SyncToCloud --> UpdateSheet[æ›´æ–° Google Sheets]
    UpdateSheet --> LogEvent3[è®°å½•åŒæ­¥æ—¥å¿—]
```

### Mixer Control è¯¦ç»†æµç¨‹

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ· Dashboard
    participant Ext as Mixer Extension
    participant OSC as OSC Client
    participant Mixer as Yamaha DM3
    participant Rep as Replicant
    participant Log as Logger
    participant Cloud as Google Sheets

    User->>Ext: ç‚¹å‡» "è¿æ¥è°ƒéŸ³å°"
    Ext->>OSC: åˆ›å»º OSC è¿æ¥
    OSC->>Mixer: è¿æ¥åˆ° IP:Port
    Mixer-->>OSC: è¿æ¥æˆåŠŸ
    OSC-->>Ext: è§¦å‘ connected äº‹ä»¶
    Ext->>Rep: æ›´æ–° connected = true<br/>(timestamp: now)
    Ext->>Log: è®°å½•è¿æ¥æˆåŠŸæ—¥å¿—
    Log-->>Log: å¼‚æ­¥å†™å…¥æ—¥å¿—æ–‡ä»¶<br/>(å¸¦æ—¶é—´æˆ³)

    loop å®æ—¶ç›‘å¬
        Mixer->>OSC: å‘é€çŠ¶æ€å˜åŒ– (OSC æ¶ˆæ¯)
        OSC->>Ext: è§£æ OSC æ¶ˆæ¯
        Ext->>Ext: æ›´æ–°å†…éƒ¨çŠ¶æ€
        Ext->>Rep: æ›´æ–° Replicant<br/>(timestamp: now)
        Rep-->>User: è‡ªåŠ¨åŒæ­¥åˆ° Dashboard
        Ext->>Log: è®°å½•çŠ¶æ€å˜åŒ–æ—¥å¿—
    end

    User->>Ext: è°ƒæ•´ Fader å€¼
    Ext->>OSC: æ„é€  OSC å‘½ä»¤
    OSC->>Mixer: å‘é€ OSC å‘½ä»¤
    Mixer-->>OSC: ç¡®è®¤æ‰§è¡Œ
    OSC-->>Ext: è§¦å‘çŠ¶æ€æ›´æ–°
    Ext->>Rep: æ›´æ–° Replicant<br/>(timestamp: now)
    Ext->>Log: è®°å½•æ“ä½œæ—¥å¿—

    User->>Ext: ç‚¹å‡» "ä¸Šè¡ŒåŒæ­¥"
    Ext->>Cloud: è°ƒç”¨ Sheets API
    Cloud-->>Ext: æ›´æ–°æˆåŠŸ
    Ext->>Log: è®°å½•åŒæ­¥æ—¥å¿—
    Ext->>User: æ˜¾ç¤ºåŒæ­¥æˆåŠŸæç¤º
```

### OBS Control è¯¦ç»†æµç¨‹

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ· Dashboard
    participant Ext as OBS Extension
    participant WS as WebSocket Client
    participant OBS as OBS Studio
    participant Rep as Replicant
    participant Log as Logger
    participant Queue as è§†é¢‘é˜Ÿåˆ—

    User->>Ext: ç‚¹å‡» "è¿æ¥ OBS"
    Ext->>WS: å»ºç«‹ WebSocket è¿æ¥
    WS->>OBS: ws://localhost:4455
    OBS-->>WS: è¿æ¥æˆåŠŸ + é‰´æƒ
    WS-->>Ext: è§¦å‘ connected äº‹ä»¶
    Ext->>Rep: æ›´æ–° connected = true<br/>(timestamp: now)
    Ext->>Log: è®°å½•è¿æ¥æˆåŠŸæ—¥å¿—

    Ext->>OBS: è¯·æ±‚å½“å‰çŠ¶æ€
    OBS-->>Ext: è¿”å›åœºæ™¯ã€æ¨æµçŠ¶æ€ç­‰
    Ext->>Rep: æ›´æ–° OBS Replicant<br/>(timestamp: now)

    loop å®æ—¶ç›‘å¬
        OBS->>WS: æ¨æµçŠ¶æ€äº‹ä»¶ (ç ç‡ã€ä¸¢åŒ…ç‡)
        WS->>Ext: è§£æäº‹ä»¶
        Ext->>Rep: æ›´æ–° streamStats<br/>(timestamp: now)
        Rep-->>User: åŒæ­¥åˆ° Dashboard æ˜¾ç¤º
        Ext->>Log: è®°å½•çŠ¶æ€æ—¥å¿—
    end

    User->>Ext: æ·»åŠ è§†é¢‘åˆ°é˜Ÿåˆ—
    Ext->>Queue: æ·»åŠ åˆ° videoQueue
    Queue->>Rep: æ›´æ–° Replicant<br/>(timestamp: now)
    Rep-->>User: æ˜¾ç¤ºé˜Ÿåˆ—

    User->>Ext: æ’­æ”¾é˜Ÿåˆ—é¦–ä¸ªè§†é¢‘
    Ext->>Queue: è·å–é˜Ÿåˆ—é¦–é¡¹
    Queue-->>Ext: è¿”å›è§†é¢‘è·¯å¾„
    Ext->>WS: å‘é€æ’­æ”¾å‘½ä»¤
    WS->>OBS: SetSourceSettings
    OBS-->>WS: å¼€å§‹æ’­æ”¾
    Ext->>Queue: ä»é˜Ÿåˆ—ç§»é™¤
    Queue->>Rep: æ›´æ–° Replicant<br/>(timestamp: now)
    Ext->>Log: è®°å½•æ’­æ”¾æ—¥å¿—
```

### å¤‡ä»½ç³»ç»Ÿæµç¨‹

```mermaid
flowchart TD
    Start([å¤‡ä»½ç³»ç»Ÿå¯åŠ¨]) --> LoadConfig[åŠ è½½å¤‡ä»½é…ç½®]
    LoadConfig --> CheckMode{å¤‡ä»½æ¨¡å¼}

    CheckMode -->|è‡ªåŠ¨å®šæ—¶å¤‡ä»½| SetSchedule[è®¾ç½®å®šæ—¶ä»»åŠ¡<br/>Node-cron]
    CheckMode -->|æ‰‹åŠ¨å¤‡ä»½| WaitManual[ç­‰å¾…ç”¨æˆ·è§¦å‘]

    SetSchedule --> WaitTrigger[ç­‰å¾…å®šæ—¶è§¦å‘]
    WaitTrigger -->|åˆ°è¾¾æ—¶é—´| StartBackup
    WaitManual -->|ç”¨æˆ·ç‚¹å‡»| StartBackup[å¼€å§‹å¤‡ä»½]

    StartBackup --> CollectData[æ”¶é›†æ‰€æœ‰ Replicants æ•°æ®]
    CollectData --> CollectConfig[æ”¶é›†é…ç½®æ–‡ä»¶]
    CollectConfig --> CreateTimestamp[ç”Ÿæˆæ—¶é—´æˆ³]
    CreateTimestamp --> CompressData[å‹ç¼©æ•°æ®<br/>ä½¿ç”¨ zlib]

    CompressData --> SaveBackup[ä¿å­˜å¤‡ä»½æ–‡ä»¶<br/>backup_YYYYMMDD_HHmmss.zip]
    SaveBackup --> LogBackup[è®°å½•å¤‡ä»½æ—¥å¿—]

    LogBackup --> CheckOldBackups{æ£€æŸ¥æ—§å¤‡ä»½}
    CheckOldBackups -->|è¶…è¿‡ä¿ç•™æœŸé™| DeleteOld[åˆ é™¤è¿‡æœŸå¤‡ä»½]
    CheckOldBackups -->|æœªè¶…æœŸ| KeepOld[ä¿ç•™å¤‡ä»½]

    DeleteOld --> LogDelete[è®°å½•åˆ é™¤æ—¥å¿—]
    LogDelete --> Done([å¤‡ä»½å®Œæˆ])
    KeepOld --> Done

    Done --> WaitTrigger

    %% æ¢å¤æµç¨‹
    UserRestore[ç”¨æˆ·é€‰æ‹©æ¢å¤] --> ConfirmDialog{ç¡®è®¤å¼¹çª—}
    ConfirmDialog -->|å–æ¶ˆ| CancelRestore([å–æ¶ˆæ¢å¤])
    ConfirmDialog -->|ç¡®è®¤| LoadBackupFile[åŠ è½½å¤‡ä»½æ–‡ä»¶]

    LoadBackupFile --> DecompressData[è§£å‹æ•°æ®]
    DecompressData --> ValidateData{éªŒè¯æ•°æ®å®Œæ•´æ€§}
    ValidateData -->|å¤±è´¥| ShowError[æ˜¾ç¤ºé”™è¯¯æç¤º]
    ValidateData -->|æˆåŠŸ| RestoreReplicants[æ¢å¤ Replicants]

    RestoreReplicants --> RestoreConfig[æ¢å¤é…ç½®æ–‡ä»¶]
    RestoreConfig --> LogRestore[è®°å½•æ¢å¤æ—¥å¿—]
    LogRestore --> NotifyModules[é€šçŸ¥æ‰€æœ‰æ¨¡å—é‡è½½]
    NotifyModules --> RestoreDone([æ¢å¤å®Œæˆ])
```

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### 1. å¼‚æ­¥å¤„ç†æœºåˆ¶

æ‰€æœ‰ Extension æ¨¡å—å‡é‡‡ç”¨ **å¼‚æ­¥ä¼˜å…ˆ** ç­–ç•¥:

#### ç¤ºä¾‹: OSC æ¶ˆæ¯å¼‚æ­¥å¤„ç†

```typescript
// mixer-control/extension/connection.ts

import { EventEmitter } from "events";
import * as osc from "node-osc";

export class MixerConnection extends EventEmitter {
  private client: osc.Client;
  private server: osc.Server;

  async connect(ip: string, port: number): Promise<void> {
    return new Promise((resolve, reject) => {
      try {
        this.client = new osc.Client(ip, port);
        this.server = new osc.Server(port + 1, "0.0.0.0", async () => {
          // è¿æ¥æˆåŠŸåå¼‚æ­¥åˆå§‹åŒ–
          await this.initializeState();
          resolve();
        });

        // å¼‚æ­¥ç›‘å¬æ¶ˆæ¯
        this.server.on("message", async (msg) => {
          const timestamp = Date.now();
          await this.handleMessage(msg, timestamp);
        });
      } catch (error) {
        reject(error);
      }
    });
  }

  private async handleMessage(msg: any[], timestamp: number): Promise<void> {
    // è§£ææ¶ˆæ¯
    const [address, ...args] = msg;

    // å¼‚æ­¥å¤„ç†å¹¶å¸¦æ—¶é—´æˆ³
    const event = {
      address,
      args,
      timestamp,
    };

    this.emit("stateChange", event);
  }
}
```

#### ç¤ºä¾‹: æ—¥å¿—å¼‚æ­¥å†™å…¥

```typescript
// logger-system/extension/logger.ts

import { promises as fs } from "fs";
import { Queue } from "async";

export class Logger {
  private writeQueue: Queue<LogEntry>;

  constructor() {
    // åˆ›å»ºå¼‚æ­¥é˜Ÿåˆ—ï¼Œæ‰¹é‡å†™å…¥
    this.writeQueue = new Queue(async (entry: LogEntry) => {
      await this.writeToFile(entry);
    }, 10); // å¹¶å‘ 10 ä¸ªå†™å…¥ä»»åŠ¡
  }

  log(
    level: string,
    module: string,
    event: string,
    message: string,
    metadata?: any
  ): void {
    const entry: LogEntry = {
      id: generateId(),
      timestamp: Date.now(), // æ—¶é—´æˆ³
      level,
      module,
      event,
      message,
      metadata,
    };

    // æ¨å…¥å¼‚æ­¥é˜Ÿåˆ—
    this.writeQueue.push(entry);

    // åŒæ—¶æ›´æ–°å†…å­˜ä¸­çš„ Replicant (å®æ—¶æŸ¥è¯¢ç”¨)
    this.updateReplicant(entry);
  }

  private async writeToFile(entry: LogEntry): Promise<void> {
    const logPath = `./logs/${new Date().toISOString().split("T")[0]}.log`;
    const logLine = JSON.stringify(entry) + "\n";

    await fs.appendFile(logPath, logLine, "utf-8");
  }
}
```

### 2. æ—¶é—´æˆ³ç­–ç•¥

æ‰€æœ‰çŠ¶æ€å˜æ›´ã€æ—¥å¿—ã€å¤‡ä»½å‡å¸¦ **Unix æ—¶é—´æˆ³** (æ¯«ç§’çº§):

```typescript
// shared/utils/timestamp.ts

export function getCurrentTimestamp(): number {
  return Date.now();
}

export function formatTimestamp(timestamp: number): string {
  return new Date(timestamp).toISOString();
}

export function isExpired(timestamp: number, expiryDays: number): boolean {
  const now = Date.now();
  const diff = now - timestamp;
  const days = diff / (1000 * 60 * 60 * 24);
  return days > expiryDays;
}
```

### 3. ç‹¬ç«‹å¯è°ƒç”¨çš„å€¼è®¾è®¡

ä½¿ç”¨ **NodeCG Replicants** çš„ç‰¹æ€§ï¼Œæ¯ä¸ªå­çŠ¶æ€å¯ç‹¬ç«‹è®¿é—®:

```typescript
// åœ¨ä»»æ„ Extension æˆ– Dashboard ä¸­è®¿é—®

// è·å–æ•´ä¸ª Mixer çŠ¶æ€
const mixerState = nodecg.Replicant<MixerState>("mixerState");

// ä»…è·å– channels (ç‹¬ç«‹å¯è°ƒç”¨)
const channels = nodecg.Replicant<Channel[]>("mixerChannels");

// ä»…è·å– DCA groups (ç‹¬ç«‹å¯è°ƒç”¨)
const dcaGroups = nodecg.Replicant<DCAGroup[]>("mixerDCAGroups");

// å•ä¸ª Channel è®¿é—® (é€šè¿‡æ¶ˆæ¯ç³»ç»Ÿ)
nodecg.sendMessage("getChannel", { id: 1 }, (err, channel) => {
  console.log(channel);
});
```

### 4. æ¨¡å—é—´é€šä¿¡

**Replicants** (çŠ¶æ€åŒæ­¥):

```typescript
// Extension æ›´æ–°
mixerState.value = newState;

// Dashboard è‡ªåŠ¨æ¥æ”¶
mixerState.on("change", (newValue) => {
  console.log("Mixer state changed:", newValue);
});
```

**Messages** (äº‹ä»¶é€šä¿¡):

```typescript
// å‘é€æ–¹
nodecg.sendMessage("mixerConnected", { ip: "192.168.1.100" });

// æ¥æ”¶æ–¹
nodecg.listenFor("mixerConnected", (data) => {
  console.log("Mixer connected at:", data.ip);
});
```

---

## ğŸ“Š æ‰©å±•æ€§è®¾è®¡

### 1. æ–°å¢ Bundle æ¨¡å—

éµå¾ª NodeCG Bundle æ ‡å‡†ç»“æ„:

1. åœ¨ `bundles/` ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹
2. åŒ…å« `package.json` å£°æ˜ graphics/dashboard
3. Extension æŒ‰éœ€å®ç°ä¸šåŠ¡é€»è¾‘
4. ä½¿ç”¨ Replicants/Messages ä¸å…¶ä»–æ¨¡å—é€šä¿¡

### 2. æ–°å¢è°ƒéŸ³å°å‹å·æ”¯æŒ

åœ¨ `mixer-control` ä¸­æ‰©å±•:

```typescript
// mixer-control/extension/adapters/

export interface MixerAdapter {
  connect(config: ConnectionConfig): Promise<void>;
  disconnect(): Promise<void>;
  sendCommand(command: MixerCommand): Promise<void>;
  getState(): Promise<MixerState>;
}

// ç°æœ‰ Yamaha DM3
export class YamahaDM3Adapter implements MixerAdapter { ... }

// æ–°å¢å…¶ä»–å‹å·
export class BehringerX32Adapter implements MixerAdapter { ... }
export class AllenHeathSQAdapter implements MixerAdapter { ... }
```

### 3. æ–°å¢ OBS åŠŸèƒ½

åœ¨ `obs-control` ä¸­æ‰©å±•:

```typescript
// obs-control/extension/features/

export abstract class OBSFeature {
  abstract initialize(): Promise<void>;
  abstract cleanup(): Promise<void>;
}

export class VideoQueueFeature extends OBSFeature { ... }
export class MultiOBSFeature extends OBSFeature { ... }  // æœªæ¥æ‰©å±•
```

---

## ğŸš€ éƒ¨ç½²ä¸è¿è¡Œ

### å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨ NodeCG å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® Dashboard
http://localhost:9090
```

### ç”Ÿäº§ç¯å¢ƒ

æ¨èä½¿ç”¨ **PM2** æˆ– **Docker**:

```bash
# PM2
pm2 start npm --name "leafseamer" -- start

# Docker (å¾…åˆ›å»º Dockerfile)
docker-compose up -d
```

---

## ğŸ“ æ€»ç»“

æœ¬æŠ€æœ¯æ ˆæ¶æ„æ–¹æ¡ˆåŸºäºä»¥ä¸‹æ ¸å¿ƒåŸåˆ™è®¾è®¡:

1. âœ… **æ¨¡å—åŒ–**: ä½¿ç”¨ NodeCG Bundle æ¶æ„ï¼Œå„æ¨¡å—ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²
2. âœ… **é«˜æ‰©å±•æ€§**: Replicants æ¨¡å¼æ”¯æŒç‹¬ç«‹è®¿é—®å­çŠ¶æ€ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
3. âœ… **å¼‚æ­¥å¤„ç†**: æ‰€æœ‰ I/O æ“ä½œå¼‚æ­¥åŒ–ï¼Œå¸¦æ—¶é—´æˆ³è®°å½•
4. âœ… **äº‘ç«¯-æœ¬åœ°æ··åˆ**: Google Sheets å†·æ•°æ®å­˜å‚¨ï¼Œæœ¬åœ°çƒ­æ•°æ®å®æ—¶å¤„ç†
5. âœ… **å®¹é”™ä¸æ¢å¤**: å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿå’Œå¤‡ä»½/æ¢å¤æœºåˆ¶

---

> æœ¬æ–‡æ¡£å°†éšé¡¹ç›®æ¼”è¿›å®æ—¶æ›´æ–°ï¼Œä¿æŒä¸å®é™…ä»£ç åŒæ­¥ã€‚
