import{c as m,j as t,r as i}from"../shared/client-tV2cqGBD.js";const b=()=>{const[c,u]=i.useState([]),[r,a]=i.useState(""),[s,g]=i.useState(null);i.useEffect(()=>{nodecg.Replicant("atem:switchers").on("change",n=>{n&&(u(n),!r&&n.length>0&&a(n[0].ip))})},[r]),i.useEffect(()=>{if(!r)return;const e=nodecg.Replicant(`atem:state:${r}`),n=o=>{g(o)};return e.on("change",n),()=>{e.removeListener("change",n)}},[r]);const h=()=>{r&&nodecg.sendMessage("atem:cut",{ip:r})},x=()=>{r&&nodecg.sendMessage("atem:auto",{ip:r})},d=(e,n)=>{r&&nodecg.sendMessage("atem:setSource",{ip:r,type:e,source:n})},f=e=>{r&&nodecg.sendMessage("atem:runMacro",{ip:r,macroIndex:e})},j=(e,n)=>{e.dataTransfer.setData("sourceId",n.toString())},l=(e,n)=>{const o=parseInt(e.dataTransfer.getData("sourceId"));isNaN(o)||d(n,o)},p=e=>{e.preventDefault()};return c.length===0?t.jsx("div",{style:{color:"white",padding:20},children:"No Active Connections. Please add a switcher in Connection panel."}):t.jsxs("div",{style:{padding:"20px",color:"white",fontFamily:"sans-serif"},children:[t.jsxs("div",{style:{marginBottom:20},children:[t.jsx("label",{children:"Select Switcher: "}),t.jsx("select",{value:r,onChange:e=>a(e.target.value),style:{padding:5,background:"#333",color:"white",border:"1px solid #555"},children:c.map(e=>t.jsxs("option",{value:e.ip,children:[e.alias||e.ip," ",e.connected?"(Connected)":"(Offline)"]},e.ip))})]}),s?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",gap:20,marginBottom:30},children:[t.jsxs("div",{style:{flex:1,background:"#a00",padding:20,borderRadius:8,height:100,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},onDrop:e=>l(e,"program"),onDragOver:p,children:[t.jsx("h3",{children:"PROGRAM"}),t.jsx("div",{style:{fontSize:24,fontWeight:"bold"},children:s.sources[s.programInput]||`Input ${s.programInput}`})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,justifyContent:"center"},children:[t.jsx("button",{onClick:h,style:{padding:"15px 30px",background:"#333",color:"white",border:"none",borderRadius:4,cursor:"pointer",fontWeight:"bold"},children:"CUT"}),t.jsx("button",{onClick:x,style:{padding:"15px 30px",background:"#333",color:"white",border:"none",borderRadius:4,cursor:"pointer",fontWeight:"bold"},children:"AUTO"}),s.inTransition&&t.jsx("div",{children:"Transitioning..."})]}),t.jsxs("div",{style:{flex:1,background:"#0a0",padding:20,borderRadius:8,height:100,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},onDrop:e=>l(e,"preview"),onDragOver:p,children:[t.jsx("h3",{children:"PREVIEW"}),t.jsx("div",{style:{fontSize:24,fontWeight:"bold"},children:s.sources[s.previewInput]||`Input ${s.previewInput}`})]})]}),t.jsxs("div",{style:{marginBottom:20},children:[t.jsx("h3",{children:"Sources (Drag to PGM/PVW)"}),t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:Object.entries(s.sources).map(([e,n])=>t.jsx("div",{draggable:!0,onDragStart:o=>j(o,parseInt(e)),onClick:()=>d("preview",parseInt(e)),style:{padding:"10px 20px",background:"#444",borderRadius:4,cursor:"grab",userSelect:"none"},children:n},e))})]}),t.jsxs("div",{children:[t.jsx("h3",{children:"Macros"}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:10},children:[Object.entries(s.macros).map(([e,n])=>t.jsx("button",{onClick:()=>f(parseInt(e)),style:{padding:"10px 20px",background:"#0056b3",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:n},e)),Object.keys(s.macros).length===0&&t.jsx("div",{children:"No macros found"})]})]})]}):t.jsx("div",{children:"Connecting to switcher state..."})]})},y=m.createRoot(document.getElementById("root"));y.render(t.jsx(b,{}));
